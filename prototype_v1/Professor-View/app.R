# Mastery Gradebook application - Professor View
# Author: Owen Bezick & Calvin Spencer
source("utils/libraries.R")

source("modules/course_info.R")
source("modules/add_homework_button.R")
source("modules/add_review_button.R")
source("modules/add_topic_button.R")
source("modules/edit_and_add.R")
source("modules/course_calendar.R")
source("modules/course_information_button.R")
source("modules/edit_roster.R")
source("modules/topics.R")
source("modules/view_calendar_item.R")
source("modules/grade.R")
source("data/data_intake.R")


ui <- dashboardPage(
    skin = "black"
    , dashboardHeader(
        title = "Professor View" 
        , tags$li(class = "dropdown"
                  , tags$img(
                      height = "40px"
                      , src= 'davidson_logo_white.png'
                      , hspace = "4"
                      , vspace = "4"
                  )
        )
    )
    , dashboardSidebar( 
        sidebarMenu(
            menuItem(
                tabName = "home"
                , text = "Home"
                , icon = icon("home")
            )
            , menuItem(
                tabName ="grades"
                , text = "Grades"
                , icon = icon("chalkboard")
            )
        )
    )
    , dashboardBody(
        includeCSS("utils/style.css")
        , tabItems(
            tabItem(
                tabName = "home"
                , fluidRow(
                    course_info_UI("courseinfo")
                    , edit_and_add_UI("edit_and_add")
                )
                , fluidRow(
                    course_calendar_UI("course_calendar")
                )
                , fluidRow(
                    topics_UI("topics")
                )
            )
            , tabItem(
                tabName = "grades"
                , tabBox(title = "Grades", width = 12
                    , homework_UI("homework")
                    , review_UI("review")
                )
               
            )
        )
    )
)


# Define server logic 
server <- function(input, output) {
    course_calendar_server("course_calendar", r)
    course_info_server("courseinfo", r)
    edit_and_add_server("edit_and_add", r)
    topics_server("topics", r)
    view_calendar_item_Server("calendar_item", r)
    homework_server("homework", r)
    review_server("review", r)
}

# Run the application 
shinyApp(ui = ui, server = server)